<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <base th:href="@{/}"><meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <title th:text="|Profil ${kor.email}|"></title>
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-light" th:if="${session.user == null}">
    <ul class="navbar-nav mr-auto">
        <li class="nav-item active"><a class="nav-link" href="login.html">Prijava</a></li>
        <li class="nav-item active"><a class="nav-link" href="registracija.html">Registracija</a></li>
    </ul>
</nav>
<nav class="navbar navbar-expand-lg navbar-light bg-light" th:unless="${session.user == null}">
    <ul class="navbar-nav mr-auto">
        <li class="nav-item active"><a class="nav-link" href="/">Početna</a></li>
        <li class="nav-item active" th:if="${session.role == 'ADMIN' and statistika == null}"><a class="nav-link" href="statistikaAdd.html">Dodaj statistiku</a></li>
        <li class="nav-item active" th:unless="${session.role == 'PATIENTS'}"><a class="nav-link" th:href="vestAdd.html">Dodaj vest</a></li>
        <li class="nav-item active"><a class="nav-link" href="vakcina/sve">Vakcine</a></li>
        <li class="nav-item active" th:if="${session.role == 'STAFF'}"><a class="nav-link" href="prijave/sve">Prijave za vakcinaciju</a></li>
        <li class="nav-item active" th:unless="${session.role == 'PATIENTS'}"><a class="nav-link" href="order/svi">Narudžbenice</a></li>
        <li class="nav-item active"><a class="nav-link" href="user">Moj profil</a></li>
        <li class="nav-item active"><a class="nav-link" href="log/odjava">Odjava</a></li>
    </ul>
</nav>
    <form method="post" th:action="@{|user/${kor.email}|}">
        <label for="ime">Ime</label>
        <input type="text" id="ime" name="ime" th:value="${kor.ime}" required><br>

        <label for="prezime">Prezime</label>
        <input type="text" id="prezime" name="prezime" th:value="${kor.prezime}" required><br>

        <label>Email</label>
        <label th:text="${kor.email}"></label><br>

        <label for="password">Šifra</label>
        <input type="password" id="password" name="password" value=""><br>

        <label for="password2">Potvrdi šifru</label>
        <input type="password" id="password2" name="password2" value=""><br>

        <label for="JMBG">Matični broj</label>
        <input type="text" id="JMBG" name="JMBG" th:value="${kor.JMBG}" minlength="13" maxlength="13" pattern="[0-9]{13}" required><br>

        <label for="datumRodjenja">Datum rođenja</label>
        <input type="date" id="datumRodjenja" name="datumRodjenja" th:value="${kor.datumRodjenja}" pattern="dd/MM/yyyy" required><br>

        <label for="adresa">Adresa</label>
        <input type="text" id="adresa" name="adresa" th:value="${kor.adresa}" required><br>

        <label>Datum registracije</label>
        <label th:text="${#dates.format(kor.datumReg, 'dd/MM/yyyy')}" ></label><br>

        <label></label>
        <label th:text="${kor.uloga}"></label><br>
        <input type="submit" value="Izmeni">

    </form>
    <table th:if="${session.role == 'PATIENTS'}">
        <caption>Primljene vakcine</caption>
        <tr>
            <th>Vakcina</th>
            <th>Doza</th>
            <th>Datum vakcinacije</th>
        </tr>
        <tr th:each="p : ${primljene}">
            <th th:text="${p.vakcina.naziv}"></th>
            <th th:text="${p.doza}"></th>
            <th th:text="${p.datumVakcinacije}"></th>
        </tr>
    </table><br>
    <table th:if="${session.role == 'PATIENTS'}">
        <caption>Aktivne prijave za vakcinaciju</caption>
        <tr>
            <th>Vakcina</th>
            <th>Doza</th>
            <th>Datum vakcinacije</th>
        </tr>
        <tr th:each="p : ${aktivne}">
            <th th:text="${p.vakcina.naziv}"></th>
            <th th:text="${p.doza}"></th>
            <th th:text="${p.datumVakcinacije}"></th>
        </tr>
    </table>
</body>
</html>